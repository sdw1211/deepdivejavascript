# 11장 원시 값과 객체의 비교

* 원시 타입의 값, 즉 원시 값은 변경이 불가능한 값, 객체 타입의 값, 즉 객체는 변경 가능한 값
* 원시 값을 변수에 할당하면 변수에는 실제 값이 저장, 객체를 변수에 할당하면 변수에는 참조 값이 저장
* 원시 값을 갖는 변수를 다른 변수에 할당하면 원본의 원시 값이 복사되어 전달(값에 의한 전달)되고 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사(참조에 의한 전달)되어 전달

## 11.1 원시 값

### 11.1.1 변경 불가능한 값

* 변경이 불가능한 값(불편성)
* 변경이 불가능한 주체는 값이지 변수는 아니다.
* 재할당 하지 못하는 것을 상수라고 함
* 원시 값을 재할당한다는 의미는 새로운 값에 대한 메모리 공간을 새로 확보한 후 원시 값을 저장 후 변수에 새롭게 할당하는 방식이다. 기존의 값은 변수에 대한 링크를 잃게 되기 떄문에 GC의 대상이된다.

```javascript
const o = {};

o.a = 10;                   //이런 것은 가능하다.(재할당하는 것이 아니기 떄문에)
o = {a:10};                 //에러(상수는 재할당을 할 수 없다.)
```

### 11.1.2 문자열과 불변성

* 문자열은 2 byte * 문자열의 크기 공간의 메모리 공간을 가진다.
* 문자열은 유사 배열 객체이면서 이터러블이므로 배열과 유사하게 각 문자에 접근할 수 있다.

```javascript
var str = '';                   //2 * 0 = 0바이트
var str2 = '1234567890';        //2 * 10 = 20바이트
console.log(str.length);        //0 문자열은 유사배열이기 때문에 length 속성값을 가진다.
str2[0];                        //'1'
str2[0] = 'a';              
str2                            //'1234567890' 문자열은 불편성을 가지기 때문에 변경되지 않는다.
```

### 11.1.3 값에 의한 전달

* 변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수에는 할당되는 변수의 원시 값이 복사되어 전달된다.(값에 의한 전달)
* 이 때 두 변수의 값은 다른 메모리 공간에 저장된 별개의 값이다.
* 그렇기 떄문에 두 변수는 서로에게 전혀 영향을 주지 않는다.
* 엄격하게 표현하면 변수에는 값이 전달되는 것이 아니라 메모리 주소가 전달되기 때문에, 이는 변수와 같은 식별자는 값이 아니라 메모리 주소를 기억하고 있기 떄문
* 값에 의한 전달도 사실은 값을 전달하는게 아니고 메모리 주소를 전달한다.전달된 메모리 주소를 통해 메모리 공간에 접근하면 값을 참조할 수 있다.

```javascript
var score = 80;
var copy = score;

console.log(score);     //80
console.log(copy);      //80

copy = 100;

console.log(score);     //80
console.log(copy);      //100
```

## 11.2 객체

* 객체의 상태를 미리 정할 수 없기 때문에 원시 값과 다르게 미리 메모리의 크기를 확정시킬 수 없다.

### 11.2.1 변경 가능한 값

* 객체 타입의 값, 객체는 변경 가능한 값이다.
* 원시 값은 링크되는 메모리 주소로 갈 경우 값이 있지만, 객체의 경우 다시 메모리 주소를 만난다. 이를 참조 값이라고 한다.
* 객체의 경우는 재할당을 하지 않고도 객체를 직접 변경할 수 있다. 즉 재할당 없이 프로퍼티를 동적으로 추가할 수도 있고 프로퍼티 값을 갱신할 수도 있으며 프로퍼티 자체를 삭제할 수도 있다.
* 객체를 변경할 때 마다 원시 값처럼 이전 값을 복사해서 새롭게 생성한다면 명확하고 신뢰성이 확보되겠지만, 객체는 크기가 매우 클 수도 있고, 원시 값처럼 크기가 일정하지도 않으며, 프로퍼티 값이 객체일 수도 있어서 복사해서 생성하는 비용이 많이 든다. 메모리 효율을 높이기 위해서 객체는 변경 가능한 값으로 설계되어 있다. 하지만 부작용이 있는데 여러 개의 식별자가 하나의 객체를 가리킬 수도 있다.

```javascript
var person = {
    name: 'Lee',
};

person.name = 'kim';
person.age =10;

delete person.age;
```

* 얕은 복사와 깊은 복사
   * 얕은 복사: 객체를 프로퍼티 값으로 갖는 객체의 경우 한 단계까지만 복사하는 것
   * 깊은 복사: 객체를 프로퍼티 값으로 갖는 객체의 경우 모든 자식 객체까지 다 복사하는 것

* 일급객체, 고차함수


### 11.2.2 참조에 의한 전달

* 객체를 가리키는 변수가 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달된다. 이를 참조에 의한 전달이라고 한다.

```javascript
var person = {
    a: 10,
};

person2 = person;
console.log(person2 === person);        //true
person.b = 20;
console.log(person2);                   //{a:10, b:20} person, person2는 동일한 객체를 참고하고 있다.
```






